class Solution {
public:
    static bool mycomp(vector<int>& a, vector<int>& b){
        if (a[1] != b[1]) return a[1] < b[1];
        return a[0] > b[0];
    }
    int intersectionSizeTwo(vector<vector<int>>& intervals) {
        sort(intervals.begin(), intervals.end(), mycomp);
        int s1 = -1, s2 = -1;
        int ans = 0;
        for (auto &v : intervals) {
            int l = v[0];
            int r = v[1];
            if (l <= s1 && s2 <= r) continue; // Case 1: interval already contains both points
            if (l <= s2) { // Case 2: contains only s2 → need 1 more point
                ans += 1;
                s1 = s2;   // shift largest to second largest
                s2 = r;    // add new point at r
            } 
            else { // Case 3: contains none → need 2 points
                ans += 2;
                s1 = r - 1; // pick (r-1)
                s2 = r;     // pick r
            }
        }
        return ans;
    }
};

// TestCases:

// [[1,3],[3,7],[5,7],[7,8]]

// [[3,14],[4,14],[3,9],[5,13],[10,17],[8,20],[7,12],[15,19],[11,17],[6,18],[16,20],[2,18],[3,5],[15,18],[9,12],[3,14],[10,15],[1,13],[8,10],[0,20]]

// [[2,10],[3,7],[3,15],[4,11],[6,12],[6,16],[7,8],[7,11],[7,15],[11,12]]

// [[2,10],[3,7],[3,15],[4,11],[6,12],[6,16],[7,8],[7,11],[7,15],[11,12],[19,45],[30,310],[26,110],[100,156],[45,110],[210,400],[223,300],[260,280],[1,3],[3,7],[5,7],[7,8],[2,10],[3,7],[3,15],[4,11],[6,12],[6,16],[7,8],[7,11],[7,15],[11,12],[2,10],[3,7],[3,15],[4,11],[6,12],[6,16],[7,8],[7,11],[7,15],[11,12],[2,10],[3,7],[3,15],[4,11],[6,12],[6,16],[7,81],[7,131],[7,156],[11,142],[2,10],[3,67],[3,15],[4,11],[6,172],[6,16],[67,889],[7,11],[7,15],[110,152],[60,160],[7,15],[11,120],[34,577],[560,590],[600,1600],[333,789],[568,4670],[3455,3565],[1,255],[98,110],[110,111],[111,112],[569,600],[612,788]]
    
// [[1,9],[2,7],[6,8],[2,3],[8,15],[3,4],[3,6],[19,100],[56,78]]
    
// [[6,7],[5,7],[10,24],[1,4],[1,3],[3,6],[100,156],[39,159]]

// [[9,110],[19,45],[30,310],[26,110],[100,156],[45,110],[210,400],[223,300],[260,280],[290,444],[1,500]]